<section class="lens-details-section">
  @if (selectedLenses().length > 0) {
    <!-- Multiple lens details -->
    <div class="lens-details">
      <div class="specifications">
        <div class="spec-header-controls">
          <h3>Specifications ({{ selectedLenses().length }} lens{{ selectedLenses().length > 1 ? 'es' : '' }} selected)</h3>
          <label class="max-mag-filter">
            <input 
              type="checkbox" 
              [(ngModel)]="showMaxMagOnly"
              class="filter-checkbox">
            Show Max Mag Only
          </label>
        </div>
        <div class="spec-table">
          <div class="spec-header">
            <div>Manufacturer</div>
            <div>Model</div>
            <div>Focal Length</div>
            <div>Max Aperture</div>
            <div>Min Focus</div>
            <div>Magnification</div>
          </div>
          @for (lens of selectedLenses(); track lens.id) {
            @for (data of getFilteredDataForLens(lens); track $index) {
              <div class="spec-row">
                <div class="spec-data">{{ lens.manufacturer }}</div> 
                <div class="spec-data">{{ lens.model }}</div>
                <div class="spec-data">{{ data.focalLength }}mm</div>
                <div class="spec-data">f/{{ data.aperture.toFixed(1) }}</div>
                <div class="spec-data">{{ data.minFocus.toFixed(2) }}m</div>
                <div class="spec-data">{{ data.magnification | number:'1.2-2' }}Ã—</div>
              </div>
            }
          }
        </div>
      </div>
    </div>
  } @else {
    <div class="no-selection">
      <div class="placeholder">
        <h3>Select one or more lenses</h3>
      </div>
    </div>
  }
</section>
